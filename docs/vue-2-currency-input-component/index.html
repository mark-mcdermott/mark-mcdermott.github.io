<!DOCTYPE html><html lang="en"> <head><meta charset="utf-8"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="viewport" content="width=device-width"><meta name="generator" content="Astro v5.13.2"><title>Mark McDermott</title><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script type="module" src="/_astro/ClientRouter.astro_astro_type_script_index_0_lang.DZnDNxNb.js"></script><link rel="stylesheet" href="/_astro/_slug_.yuvoUanq.css">
<style>footer[data-astro-cid-olvf4l2g]{display:flex;flex-flow:column wrap;align-content:flex-end}.markdown{line-height:28px;--path: none;--radius-top: 12px;--radius-bottom: 12px;--padding-top: 1rem;--padding-bottom: 1rem}.markdown p{padding-bottom:2rem}.markdown a{border-bottom-width:1px;border-color:var(--link);color:var(--link)}.markdown hr{padding-top:2rem;opacity:.6}@media (prefers-color-scheme: dark){.markdown hr{opacity:.1}}.markdown h1{margin-top:.5rem;padding-bottom:2rem;font-family:Montserrat;font-size:2.25rem;line-height:2.5rem;font-weight:700}.markdown h2{margin-top:.5rem;padding-bottom:2rem;font-family:Montserrat;font-size:1.875rem;line-height:2.25rem;font-weight:700}.markdown h3{margin-top:.5rem;padding-bottom:2rem;font-size:1.5rem;line-height:2rem;font-weight:700}.markdown h4{margin-top:.5rem;padding-bottom:2rem;font-size:1.25rem;line-height:1.75rem;font-weight:700}.markdown :not(pre)>code{background:var(--inlineCode-bg);color:var(--inlineCode-text);padding:.15em .2em .05em;white-space:normal}.markdown pre{margin-left:-1rem;margin-right:-1rem;margin-bottom:2rem;overflow-y:auto;padding:1rem;font-size:.875rem;line-height:1.25rem;clip-path:var(--path);border-top-right-radius:var(--radius-top);border-top-left-radius:var(--radius-top);border-bottom-right-radius:var(--radius-bottom);border-bottom-left-radius:var(--radius-bottom);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom)}.markdown pre code{width:auto}.markdown blockquote{position:relative;left:-.5rem;margin-left:-1rem;margin-bottom:2rem;padding-left:1rem;font-style:italic;border-left:3px solid hsla(0,0%,0%,.9);border-left-color:inherit;opacity:.8}.markdown blockquote p{margin:0;padding:0}.markdown p img{margin-bottom:0}.markdown ul{margin-top:0;padding:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;list-style:disc}.markdown li{margin-bottom:.875rem}.markdown img{margin-bottom:2rem;max-width:100%}.markdown pre [data-highlighted-line]{margin-left:-16px;padding-left:12px;border-left:4px solid #ffa7c4;background-color:#022a4b;display:block;padding-right:1em}
</style>
<link rel="stylesheet" href="/_astro/index.DAnASyZ2.css"></head> <body class="mx-auto max-w-7xl bg-[--bg] px-5 py-12 text-[--text]">   <header class="mb-14 flex flex-row place-content-between"> <a class="inline-block text-2xl font-black font-['Montserrat'] hover:scale-[1.02]" target="_self" href="/"><span>markmcdermott.io (js,&nbsp;ruby,&nbsp;...etc)</span> </a> <span class="min-w-20 relative top-[4px] italic">
by
<a class="scale-100 active:scale-100" target="_blank" href="https://github.com/mark-mcdermott"><img src="https://avatars.githubusercontent.com/u/9694783?v=5" alt="mark mcdermott" title="mark mcdermott" loading="lazy" decoding="async" fetchpriority="auto" width="32" height="32" class="relative -top-1 mx-2 inline h-8 w-8 rounded-full"> </a> </span> </header>   <article> <h1 class="text-[40px] font-black leading-[44px] text-[--title] font-['Montserrat']"> Vue Currency Component </h1> <div class="mt-1 post-subtitle" style="color: var(--purple)"><p>A component for entering dollar and cents values</p></div> <p class="mb-6 mt-2 text-[13px] text-gray-700 dark:text-gray-300"> 04/14/2024 </p> <p class="mt-2 text-[13px] text-gray-700 dark:text-gray-300">
read time: 3 mins </p> <div class="markdown mt-10"> <p>Here is a Vue 2 component for entering dollar and cents values that I wrote a couple days ago that I’m pretty proud of. When you click in the input and type a number it shows “<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.0</mn><mi>x</mi><mi mathvariant="normal">&quot;</mi><mi>w</mi><mi>h</mi><mi>e</mi><mi>r</mi><mi>e</mi><mi>x</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>h</mi><mi>e</mi><mi>n</mi><mi>u</mi><mi>m</mi><mi>b</mi><mi>e</mi><mi>r</mi><mi>y</mi><mi>o</mi><mi>u</mi><mi>i</mi><mi>n</mi><mi>p</mi><mi>u</mi><mi>t</mi><mi>t</mi><mi>e</mi><mi>d</mi><mi mathvariant="normal">.</mi><mi>T</mi><mi>h</mi><mi>e</mi><mi>n</mi><mi>y</mi><mi>o</mi><mi>u</mi><mi>w</mi><mi>h</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>y</mi><mi>p</mi><mi>e</mi><mi>y</mi><mi>n</mi><mi>u</mi><mi>m</mi><mi>b</mi><mi>e</mi><mi>r</mi><mo separator="true">,</mo><mi>i</mi><mi>t</mi><mi>s</mi><mi>h</mi><mi>o</mi><mi>w</mi><mi>s</mi><mi mathvariant="normal">&quot;</mi></mrow><annotation encoding="application/x-tex">0.0x&quot; where x is the number you inputted. Then you when type y number, it shows &quot;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord">0.0</span><span class="mord mathnormal">x</span><span class="mord">&quot;</span><span class="mord mathnormal" style="margin-right:0.02691em">w</span><span class="mord mathnormal">h</span><span class="mord mathnormal">ere</span><span class="mord mathnormal">x</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">mb</span><span class="mord mathnormal">eryo</span><span class="mord mathnormal">u</span><span class="mord mathnormal">in</span><span class="mord mathnormal">p</span><span class="mord mathnormal">u</span><span class="mord mathnormal">tt</span><span class="mord mathnormal">e</span><span class="mord mathnormal">d</span><span class="mord">.</span><span class="mord mathnormal" style="margin-right:0.13889em">T</span><span class="mord mathnormal">h</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">yo</span><span class="mord mathnormal">u</span><span class="mord mathnormal" style="margin-right:0.02691em">w</span><span class="mord mathnormal">h</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mord mathnormal">p</span><span class="mord mathnormal" style="margin-right:0.03588em">ey</span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">mb</span><span class="mord mathnormal" style="margin-right:0.02778em">er</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">i</span><span class="mord mathnormal">t</span><span class="mord mathnormal">s</span><span class="mord mathnormal">h</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.02691em">w</span><span class="mord mathnormal">s</span><span class="mord">&quot;</span></span></span></span>0.xy”. And so on, so if you type “123456789”, it displays “$1,234,567.89”. When anything but a number is typed, it is ignored. But it correctly handles inputs like arrow keys, delete/backspace, command/control + a, etc.array and use Javascript’s <code>some</code> or <code>every</code> method:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="vue"><code><span class="line"><span style="color:#E1E4E8">&lt;</span><span style="color:#85E89D">template</span><span style="color:#E1E4E8">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8">&lt;</span><span style="color:#85E89D">input</span><span style="color:#E1E4E8"> </span></span>
<span class="line"><span style="color:#B392F0">  v-bind</span><span style="color:#E1E4E8">:</span><span style="color:#B392F0">value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">&quot;</span><span style="color:#E1E4E8">value</span><span style="color:#9ECBFF">&quot;</span></span>
<span class="line"><span style="color:#B392F0">  v-on</span><span style="color:#E1E4E8">:</span><span style="color:#B392F0">keydown</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">&quot;</span><span style="color:#B392F0">discardIllegalEntries</span><span style="color:#E1E4E8">($event)</span><span style="color:#9ECBFF">&quot;</span></span>
<span class="line"><span style="color:#B392F0">  v-on</span><span style="color:#E1E4E8">:</span><span style="color:#B392F0">input</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">&quot;</span><span style="color:#B392F0">$emit</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;input&#39;</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">updateCurrencyStr</span><span style="color:#E1E4E8">($event))</span><span style="color:#9ECBFF">&quot;</span></span>
<span class="line"><span style="color:#B392F0">  ref</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">&quot;input&quot;</span></span>
<span class="line"><span style="color:#E1E4E8">/&gt;</span></span>
<span class="line"><span style="color:#E1E4E8">&lt;/</span><span style="color:#85E89D">template</span><span style="color:#E1E4E8">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8">&lt;</span><span style="color:#85E89D">script</span><span style="color:#E1E4E8">&gt;</span></span>
<span class="line"><span style="color:#F97583">  import</span><span style="color:#E1E4E8"> { ref } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> &#39;vue&#39;</span></span>
<span class="line"><span style="color:#F97583">  export</span><span style="color:#F97583"> default</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">    props: [</span><span style="color:#9ECBFF">&#39;value&#39;</span><span style="color:#E1E4E8">],</span></span>
<span class="line"><span style="color:#B392F0">    setup</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#F97583">      const</span><span style="color:#79B8FF"> input</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> ref</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">null</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">      return</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">        input</span></span>
<span class="line"><span style="color:#E1E4E8">      }</span></span>
<span class="line"><span style="color:#E1E4E8">    },</span></span>
<span class="line"><span style="color:#E1E4E8">    methods: {</span></span>
<span class="line"><span style="color:#B392F0">      discardIllegalEntries</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">evt</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">        if</span><span style="color:#E1E4E8"> (</span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">isIllegalEntry</span><span style="color:#E1E4E8">(evt)) {</span></span>
<span class="line"><span style="color:#E1E4E8">          evt.</span><span style="color:#B392F0">preventDefault</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">        }</span></span>
<span class="line"><span style="color:#E1E4E8">      },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">      isIllegalEntry</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">evt</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">        if</span><span style="color:#E1E4E8"> (evt.altKey </span><span style="color:#F97583">||</span><span style="color:#E1E4E8"> evt.ctrlKey </span><span style="color:#F97583">||</span><span style="color:#E1E4E8"> evt.metaKey) </span><span style="color:#F97583">return</span><span style="color:#79B8FF"> false</span><span style="color:#6A737D">  // we don&#39;t care what&#39;s pressed if alt, ctrl or command are also held down</span></span>
<span class="line"><span style="color:#F97583">        const</span><span style="color:#79B8FF"> keyCode</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> evt.keyCode</span></span>
<span class="line"><span style="color:#F97583">        const</span><span style="color:#79B8FF"> is58To90</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> keyCode </span><span style="color:#F97583">&gt;</span><span style="color:#79B8FF"> 57</span><span style="color:#F97583"> &amp;&amp;</span><span style="color:#E1E4E8"> keyCode </span><span style="color:#F97583">&lt;</span><span style="color:#79B8FF"> 91</span><span style="color:#6A737D">               // 58-90 are punctuation, math symbols and letters</span></span>
<span class="line"><span style="color:#F97583">        const</span><span style="color:#79B8FF"> is106To111</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> keyCode </span><span style="color:#F97583">&gt;</span><span style="color:#79B8FF"> 105</span><span style="color:#F97583"> &amp;&amp;</span><span style="color:#E1E4E8"> keyCode </span><span style="color:#F97583">&lt;</span><span style="color:#79B8FF"> 112</span><span style="color:#6A737D">           // 106-111 are math operation symbols</span></span>
<span class="line"><span style="color:#F97583">        const</span><span style="color:#79B8FF"> is160</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> keyCode </span><span style="color:#F97583">===</span><span style="color:#79B8FF"> 160</span><span style="color:#6A737D">                               // 160 is ^ symbol</span></span>
<span class="line"><span style="color:#F97583">        const</span><span style="color:#79B8FF"> is163To165</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> keyCode </span><span style="color:#F97583">&gt;</span><span style="color:#79B8FF"> 162</span><span style="color:#F97583"> &amp;&amp;</span><span style="color:#E1E4E8"> keyCode </span><span style="color:#F97583">&lt;</span><span style="color:#79B8FF"> 166</span><span style="color:#6A737D">           // 163-165 are currency symbols</span></span>
<span class="line"><span style="color:#F97583">        const</span><span style="color:#79B8FF"> is169To173</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> keyCode </span><span style="color:#F97583">&gt;</span><span style="color:#79B8FF"> 168</span><span style="color:#F97583"> &amp;&amp;</span><span style="color:#E1E4E8"> keyCode </span><span style="color:#F97583">&lt;</span><span style="color:#79B8FF"> 174</span><span style="color:#6A737D">           // 169-173 are copyright, trademark, registered, section, dash</span></span>
<span class="line"><span style="color:#F97583">        const</span><span style="color:#79B8FF"> is186To223</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> keyCode </span><span style="color:#F97583">&gt;</span><span style="color:#79B8FF"> 185</span><span style="color:#F97583"> &amp;&amp;</span><span style="color:#E1E4E8"> keyCode </span><span style="color:#F97583">&lt;</span><span style="color:#79B8FF"> 224</span><span style="color:#6A737D">           // 186-223 are punctuation, symbols, math symbols</span></span>
<span class="line"><span style="color:#F97583">        const</span><span style="color:#79B8FF"> is226</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> keyCode </span><span style="color:#F97583">===</span><span style="color:#79B8FF"> 226</span><span style="color:#6A737D">                               // 226 is &lt; symbol</span></span>
<span class="line"><span style="color:#F97583">        const</span><span style="color:#79B8FF"> isShiftPlusNumber</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> evt.shiftKey </span><span style="color:#F97583">&amp;&amp;</span><span style="color:#79B8FF"> this</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">isNumber</span><span style="color:#E1E4E8">(keyCode)</span></span>
<span class="line"><span style="color:#F97583">        const</span><span style="color:#79B8FF"> illegalEntries</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> [is58To90, is106To111, is160, is163To165, is169To173, is186To223, is226, isShiftPlusNumber]</span></span>
<span class="line"><span style="color:#F97583">        const</span><span style="color:#79B8FF"> isEntryIllegal</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> illegalEntries.</span><span style="color:#B392F0">some</span><span style="color:#E1E4E8">(Boolean)         </span><span style="color:#6A737D">// are any vals in array truthy, https://www.30secondsofcode.org/js/s/check-array-values-are-truthy/#check-if-all-values-in-an-array-are-truthy</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#E1E4E8"> isEntryIllegal</span></span>
<span class="line"><span style="color:#E1E4E8">      },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">      isNumber</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">keyCode</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#E1E4E8"> keyCode </span><span style="color:#F97583">&gt;</span><span style="color:#79B8FF"> 47</span><span style="color:#F97583"> &amp;&amp;</span><span style="color:#E1E4E8"> keyCode </span><span style="color:#F97583">&lt;</span><span style="color:#79B8FF"> 58</span><span style="color:#F97583"> ||</span><span style="color:#E1E4E8"> keyCode </span><span style="color:#F97583">&gt;</span><span style="color:#79B8FF"> 95</span><span style="color:#F97583"> &amp;&amp;</span><span style="color:#E1E4E8"> keyCode </span><span style="color:#F97583">&lt;</span><span style="color:#79B8FF"> 106</span></span>
<span class="line"><span style="color:#E1E4E8">      },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">      // @param rawCurrencyInt: 6327397 would represent $63,273.97</span></span>
<span class="line"><span style="color:#6A737D">      // @return allButLastTwoWithCommas: &#39;63,273&#39;</span></span>
<span class="line"><span style="color:#B392F0">      dollarsStrFromRawCurrencyInt</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">rawCurrencyInt</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">        const</span><span style="color:#79B8FF"> allButLastTwo</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> rawCurrencyInt.</span><span style="color:#B392F0">toString</span><span style="color:#E1E4E8">().</span><span style="color:#B392F0">slice</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">, </span><span style="color:#F97583">-</span><span style="color:#79B8FF">2</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">        const</span><span style="color:#79B8FF"> addCommasRegex</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> /</span><span style="color:#F97583">\B</span><span style="color:#DBEDFF">(?=(</span><span style="color:#79B8FF">\d</span><span style="color:#F97583">{3}</span><span style="color:#DBEDFF">)</span><span style="color:#F97583">+</span><span style="color:#DBEDFF">(?!</span><span style="color:#79B8FF">\d</span><span style="color:#DBEDFF">))</span><span style="color:#9ECBFF">/</span><span style="color:#F97583">g</span></span>
<span class="line"><span style="color:#F97583">        const</span><span style="color:#79B8FF"> allButLastTwoWithCommas</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> allButLastTwo.</span><span style="color:#B392F0">replace</span><span style="color:#E1E4E8">(addCommasRegex, </span><span style="color:#9ECBFF">&#39;,&#39;</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#E1E4E8"> allButLastTwoWithCommas</span></span>
<span class="line"><span style="color:#E1E4E8">      },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">      // @param rawCurrencyInt: 6327397 would represent $63,273.97</span></span>
<span class="line"><span style="color:#6A737D">      // @return lastTwo: &#39;97&#39;</span></span>
<span class="line"><span style="color:#B392F0">      centsStrFromRawCurrencyInt</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">rawCurrencyInt</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">        const</span><span style="color:#79B8FF"> lastTwo</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> rawCurrencyInt.</span><span style="color:#B392F0">toString</span><span style="color:#E1E4E8">().</span><span style="color:#B392F0">slice</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">-</span><span style="color:#79B8FF">2</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#E1E4E8"> lastTwo</span></span>
<span class="line"><span style="color:#E1E4E8">      },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">      currencyStrFromDollarsAndCents</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">dollars</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">cents</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#9ECBFF"> `$${</span><span style="color:#E1E4E8">dollars</span><span style="color:#9ECBFF">}.${</span><span style="color:#E1E4E8">cents</span><span style="color:#9ECBFF">}`</span></span>
<span class="line"><span style="color:#E1E4E8">      },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">      currencyStrFromRawCurrencyInt</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">rawCurrencyInt</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">        const</span><span style="color:#79B8FF"> dollars</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> this</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">dollarsStrFromRawCurrencyInt</span><span style="color:#E1E4E8">(rawCurrencyInt)</span></span>
<span class="line"><span style="color:#F97583">        const</span><span style="color:#79B8FF"> cents</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> this</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">centsStrFromRawCurrencyInt</span><span style="color:#E1E4E8">(rawCurrencyInt)</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#79B8FF"> this</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">currencyStrFromDollarsAndCents</span><span style="color:#E1E4E8">(dollars, cents)</span></span>
<span class="line"><span style="color:#E1E4E8">      },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">      // @param currencyStr: &#39;$63,273.97&#39;</span></span>
<span class="line"><span style="color:#6A737D">      // @return rawCurrencyInt: 6327397</span></span>
<span class="line"><span style="color:#B392F0">      rawCurrencyIntFromCurrencyStr</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">currencyStr</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">        if</span><span style="color:#E1E4E8"> (currencyStr </span><span style="color:#F97583">===</span><span style="color:#9ECBFF"> &#39;&#39;</span><span style="color:#E1E4E8">) </span></span>
<span class="line"><span style="color:#F97583">          return</span><span style="color:#9ECBFF"> &#39;&#39;</span></span>
<span class="line"><span style="color:#F97583">        else</span></span>
<span class="line"><span style="color:#F97583">          return</span><span style="color:#B392F0"> parseInt</span><span style="color:#E1E4E8">(currencyStr.</span><span style="color:#B392F0">replace</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">/</span><span style="color:#79B8FF">[</span><span style="color:#F97583">^</span><span style="color:#79B8FF">\d]</span><span style="color:#9ECBFF">/</span><span style="color:#F97583">g</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">&#39;&#39;</span><span style="color:#E1E4E8">))</span></span>
<span class="line"><span style="color:#E1E4E8">      },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">      // @param changedCurrencyStr: &#39;$63,273.397&#39;</span></span>
<span class="line"><span style="color:#6A737D">      // @return fixedCurrencyStr: &#39;$632,733.97&#39;</span></span>
<span class="line"><span style="color:#B392F0">      updateCurrencyStr</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">evt</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">        const</span><span style="color:#79B8FF"> changedCurrencyStr</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> evt.target.value</span></span>
<span class="line"><span style="color:#F97583">        const</span><span style="color:#79B8FF"> strLenAtStart</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> changedCurrencyStr.</span><span style="color:#79B8FF">length</span></span>
<span class="line"><span style="color:#F97583">        const</span><span style="color:#79B8FF"> cursorPosition</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> evt.target.selectionStart</span></span>
<span class="line"><span style="color:#F97583">        const</span><span style="color:#79B8FF"> rawCurrencyInt</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> this</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">rawCurrencyIntFromCurrencyStr</span><span style="color:#E1E4E8">(changedCurrencyStr)</span></span>
<span class="line"><span style="color:#F97583">        let</span><span style="color:#E1E4E8"> correctedCurrencyStr </span><span style="color:#F97583">=</span><span style="color:#9ECBFF"> &#39;&#39;</span></span>
<span class="line"><span style="color:#F97583">        switch</span><span style="color:#E1E4E8"> (rawCurrencyInt.</span><span style="color:#B392F0">toString</span><span style="color:#E1E4E8">().</span><span style="color:#79B8FF">length</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">          case</span><span style="color:#79B8FF"> 0</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#F97583">            break</span></span>
<span class="line"><span style="color:#F97583">          case</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">            correctedCurrencyStr </span><span style="color:#F97583">=</span><span style="color:#9ECBFF"> `$0.0${</span><span style="color:#E1E4E8">rawCurrencyInt</span><span style="color:#9ECBFF">}`</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">            break</span></span>
<span class="line"><span style="color:#F97583">          case</span><span style="color:#79B8FF"> 2</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">            correctedCurrencyStr </span><span style="color:#F97583">=</span><span style="color:#9ECBFF"> `$0.${</span><span style="color:#E1E4E8">rawCurrencyInt</span><span style="color:#9ECBFF">}`</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">            break</span></span>
<span class="line"><span style="color:#F97583">          case</span><span style="color:#79B8FF"> 3</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#F97583">          case</span><span style="color:#79B8FF"> 4</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">            correctedCurrencyStr </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> this</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">currencyStrFromRawCurrencyInt</span><span style="color:#E1E4E8">(rawCurrencyInt)</span></span>
<span class="line"><span style="color:#F97583">            break</span></span>
<span class="line"><span style="color:#F97583">          default</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">            correctedCurrencyStr </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> this</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">currencyStrFromRawCurrencyInt</span><span style="color:#E1E4E8">(rawCurrencyInt)</span></span>
<span class="line"><span style="color:#E1E4E8">        }</span></span>
<span class="line"><span style="color:#B392F0">        setTimeout</span><span style="color:#E1E4E8">(() </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">          const</span><span style="color:#79B8FF"> strLenAtEnd</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> correctedCurrencyStr.</span><span style="color:#79B8FF">length</span></span>
<span class="line"><span style="color:#F97583">          const</span><span style="color:#79B8FF"> cursorPositionOffset</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> strLenAtEnd </span><span style="color:#F97583">-</span><span style="color:#E1E4E8"> strLenAtStart</span></span>
<span class="line"><span style="color:#F97583">          const</span><span style="color:#79B8FF"> newCursorPosition</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> cursorPosition </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> cursorPositionOffset</span></span>
<span class="line"><span style="color:#79B8FF">          this</span><span style="color:#E1E4E8">.$refs.input.</span><span style="color:#B392F0">setSelectionRange</span><span style="color:#E1E4E8">(newCursorPosition, newCursorPosition);</span></span>
<span class="line"><span style="color:#E1E4E8">        });</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#E1E4E8"> correctedCurrencyStr</span></span>
<span class="line"><span style="color:#E1E4E8">      }</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">&lt;/</span><span style="color:#85E89D">script</span><span style="color:#E1E4E8">&gt;</span></span></code></pre> <!-- @ts-expect-error: Custom attributes for Utterances script --> <script src="https://utteranc.es/client.js" repo="mark-mcdermott/mark-mcdermott.github.io" issue-term="pathname" theme="github-light" crossorigin="anonymous" async></script> </div> </article>  <footer class="mt-12" data-astro-cid-olvf4l2g> <a class="inline-block text-2xl font-black font-['Montserrat'] hover:scale-[1.02]" target="_self" href="/"><span data-astro-cid-i45duxs4>markmcdermott.io</span> </a> <p data-astro-cid-i45duxs4> <a href="https://github.com/mark-mcdermott" data-astro-cid-i45duxs4>github</a> |
<a href="https://bsky.app/profile/mark-mcdermott.bsky.social" data-astro-cid-i45duxs4>bluesky</a> |
<a href="https://www.linkedin.com/in/mark-mcdermott-6a174916/" data-astro-cid-i45duxs4>linkedin</a></p> <p data-astro-cid-i45duxs4>&copy; 2025 mark mcdermott </p>  </footer>  </body></html> 