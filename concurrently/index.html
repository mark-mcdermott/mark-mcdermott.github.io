<!DOCTYPE html><html lang="en"> <head><meta charset="utf-8"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="viewport" content="width=device-width"><meta name="generator" content="Astro v5.13.2"><title>Mark McDermott</title><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script type="module" src="/_astro/ClientRouter.astro_astro_type_script_index_0_lang.DZnDNxNb.js"></script><link rel="stylesheet" href="/_astro/_slug_.B_QYcVCA.css">
<style>footer[data-astro-cid-olvf4l2g]{display:flex;flex-flow:column wrap;align-content:flex-end}.markdown{line-height:28px;--path: none;--radius-top: 12px;--radius-bottom: 12px;--padding-top: 1rem;--padding-bottom: 1rem}.markdown p{padding-bottom:2rem}.markdown a{border-bottom-width:1px;border-color:var(--link);color:var(--link)}.markdown hr{padding-top:2rem;opacity:.6}@media (prefers-color-scheme: dark){.markdown hr{opacity:.1}}.markdown h1{margin-top:.5rem;padding-bottom:2rem;font-family:Montserrat;font-size:2.25rem;line-height:2.5rem;font-weight:700}.markdown h2{margin-top:.5rem;padding-bottom:2rem;font-family:Montserrat;font-size:1.875rem;line-height:2.25rem;font-weight:700}.markdown h3{margin-top:.5rem;padding-bottom:2rem;font-size:1.5rem;line-height:2rem;font-weight:700}.markdown h4{margin-top:.5rem;padding-bottom:2rem;font-size:1.25rem;line-height:1.75rem;font-weight:700}.markdown :not(pre)>code{background:var(--inlineCode-bg);color:var(--inlineCode-text);padding:.15em .2em .05em;white-space:normal}.markdown pre{margin-left:-1rem;margin-right:-1rem;margin-bottom:2rem;overflow-y:auto;padding:1rem;font-size:.875rem;line-height:1.25rem;clip-path:var(--path);border-top-right-radius:var(--radius-top);border-top-left-radius:var(--radius-top);border-bottom-right-radius:var(--radius-bottom);border-bottom-left-radius:var(--radius-bottom);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom)}.markdown pre code{width:auto}.markdown blockquote{position:relative;left:-.5rem;margin-left:-1rem;margin-bottom:2rem;padding-left:1rem;font-style:italic;border-left:3px solid hsla(0,0%,0%,.9);border-left-color:inherit;opacity:.8}.markdown blockquote p{margin:0;padding:0}.markdown p img{margin-bottom:0}.markdown ul{margin-top:0;padding:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;list-style:disc}.markdown li{margin-bottom:.875rem}.markdown img{margin-bottom:2rem;max-width:100%}.markdown pre [data-highlighted-line]{margin-left:-16px;padding-left:12px;border-left:4px solid #ffa7c4;background-color:#022a4b;display:block;padding-right:1em}
</style>
<link rel="stylesheet" href="/_astro/index.CX5Zbgb8.css"></head> <body class="mx-auto max-w-7xl bg-[--bg] px-5 py-12 text-[--text]">   <header class="mb-14 flex flex-row place-content-between"> <a class="inline-block text-2xl font-black font-['Montserrat'] hover:scale-[1.02]" target="_self" href="/"><span>markmcdermott.io (js,&nbsp;ruby,&nbsp;...etc)</span> </a> <span class="min-w-20 relative top-[4px] italic">
by
<a class="scale-100 active:scale-100" target="_blank" href="https://github.com/mark-mcdermott"><img src="https://avatars.githubusercontent.com/u/9694783?v=5" alt="mark mcdermott" title="mark mcdermott" loading="lazy" decoding="async" fetchpriority="auto" width="32" height="32" class="relative -top-1 mx-2 inline h-8 w-8 rounded-full"> </a> </span> </header>  <article> <h1 class="text-[40px] font-black leading-[44px] text-[--title] font-['Montserrat']" style="--myColor1:var(--pink);--myColor2:var(--purple);background-image:linear-gradient(45deg, var(--myColor1), var(--myColor2));background-clip:text;-webkit-background-clip:text;color:transparent;transition:--myColor1 0.2s ease-out, --myColor2 0.2s ease-in-out"> Running a Frontend and Backend with Concurrently </h1> <div class="mt-1 post-subtitle" style="color: var(--purple)"><p>Running A frontend and backend with Concurrently</p></div> <p class="mb-6 mt-2 text-[13px] text-gray-700 dark:text-gray-300"> 09/06/2024 </p> <p class="mt-2 text-[13px] text-gray-700 dark:text-gray-300">
read time：4 mins </p> <div class="markdown mt-10"> <h2 id="starting-a-frontendbackend-with-concurrently">Starting A Frontend/Backend With Concurrently</h2>
<p>There are many ways to start a frontend and the backend locally with one command. In my experience, the npm package called <a href="https://www.npmjs.com/package/concurrently">concurrently</a> is the best. You install it with just <code>npm install --save-dev concurrently</code> and my favorite way to run it is from frontend folder with a line in the <code>package.json</code> <code>scripts</code> section like this:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="json"><code><span class="line"><span style="color:#9ECBFF">&quot;front-and-back-dev&quot;</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">&quot;concurrently -n </span><span style="color:#79B8FF">\&quot;</span><span style="color:#9ECBFF">BACKEND,FRONTEND</span><span style="color:#79B8FF">\&quot;</span><span style="color:#9ECBFF"> -c </span><span style="color:#79B8FF">\&quot;</span><span style="color:#9ECBFF">green,yellow</span><span style="color:#79B8FF">\&quot;</span><span style="color:#79B8FF"> \&quot;</span><span style="color:#9ECBFF">cd ../backend &amp;&amp; rails server</span><span style="color:#79B8FF">\&quot;</span><span style="color:#79B8FF"> \&quot;</span><span style="color:#9ECBFF">npm run dev</span><span style="color:#79B8FF">\&quot;</span><span style="color:#9ECBFF">&quot;</span></span></code></pre>
<p>This shows you the output of both the front and back with all the backend output in green and prefixed with <code>[BACKEND]</code> and all the frontend output in yellow prefixed with <code>[FRONTEND]</code>.</p>
<p>If you don’t want the color coding, it’s just:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="json"><code><span class="line"><span style="color:#9ECBFF">&quot;front-and-back-dev&quot;</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">&quot;concurrently -n </span><span style="color:#79B8FF">\&quot;</span><span style="color:#9ECBFF">BACKEND,FRONTEND</span><span style="color:#79B8FF">\&quot;</span><span style="color:#79B8FF"> \&quot;</span><span style="color:#9ECBFF">cd ../backend &amp;&amp; rails server</span><span style="color:#79B8FF">\&quot;</span><span style="color:#79B8FF"> \&quot;</span><span style="color:#9ECBFF">npm run dev</span><span style="color:#79B8FF">\&quot;</span><span style="color:#9ECBFF">&quot;</span></span></code></pre>
<p>And if you don’t want the prefixing, it’s just</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="json"><code><span class="line"><span style="color:#9ECBFF">&quot;front-and-back-dev&quot;</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">&quot;concurrently </span><span style="color:#79B8FF">\&quot;</span><span style="color:#9ECBFF">cd ../backend &amp;&amp; rails server</span><span style="color:#79B8FF">\&quot;</span><span style="color:#79B8FF"> \&quot;</span><span style="color:#9ECBFF">npm run dev</span><span style="color:#79B8FF">\&quot;</span><span style="color:#9ECBFF">&quot;</span></span></code></pre>
<p>If you want to make this cleaner still, you can add script lines for the backend and reference that in the Concurrently script:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="json"><code><span class="line"><span style="color:#9ECBFF">&quot;rails-server&quot;</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">&quot;cd ../backend &amp;&amp; rails server&quot;</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#9ECBFF">&quot;front-and-back-dev&quot;</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">&quot;concurrently </span><span style="color:#79B8FF">\&quot;</span><span style="color:#9ECBFF">npm run rails-server</span><span style="color:#79B8FF">\&quot;</span><span style="color:#79B8FF"> \&quot;</span><span style="color:#9ECBFF">npm run dev</span><span style="color:#79B8FF">\&quot;</span><span style="color:#9ECBFF">&quot;</span><span style="color:#E1E4E8">,</span></span></code></pre>
<h2 id="running-end-to-end-tests-with-concurrently">Running End-To-End Tests With Concurrently</h2>
<p>Sometimes you want to wait for the backend to start before starting the frontend, like in the case of running end-to-end tests with something like Playwright. This gets a little more complicated, but still isn’t too bad.</p>
<p>Create a bash script that waits for rails to start:</p>
<ul>
<li><code>touch wait-for-rails.sh</code></li>
<li>Copy/paste the following to <code>wait-for-rails.sh</code>:</li>
</ul>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="plaintext"><code><span class="line"><span>#!/bin/bash</span></span>
<span class="line"><span>until curl --silent --fail http://localhost:3000/api/v1/up | grep -q &#39;{&quot;status&quot;:&quot;OK&quot;}&#39;; do</span></span>
<span class="line"><span>  echo &quot;Waiting for Rails server to start...&quot;</span></span>
<span class="line"><span>  sleep 1</span></span>
<span class="line"><span>done</span></span>
<span class="line"><span>echo &quot;Ok, rails server is up and running - let&#39;s start testing!&quot;</span></span></code></pre>
<ul>
<li>Run <code>chmod +x wait-for-rails.sh</code> to give our script executable permissions.</li>
<li>Then add this to your <code>package.json</code> <code>scripts</code> section:</li>
</ul>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="json"><code><span class="line"><span style="color:#9ECBFF">    &quot;rails-server&quot;</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">&quot;cd ../backend &amp;&amp; rails server&quot;</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#9ECBFF">    &quot;front-and-back-dev&quot;</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">&quot;concurrently -n </span><span style="color:#79B8FF">\&quot;</span><span style="color:#9ECBFF">BACKEND,FRONTEND</span><span style="color:#79B8FF">\&quot;</span><span style="color:#9ECBFF"> -c </span><span style="color:#79B8FF">\&quot;</span><span style="color:#9ECBFF">green,yellow</span><span style="color:#79B8FF">\&quot;</span><span style="color:#79B8FF"> \&quot;</span><span style="color:#9ECBFF">npm run rails-server</span><span style="color:#79B8FF">\&quot;</span><span style="color:#79B8FF"> \&quot;</span><span style="color:#9ECBFF">npm run dev</span><span style="color:#79B8FF">\&quot;</span><span style="color:#9ECBFF">&quot;</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#9ECBFF">    &quot;e2e-tests&quot;</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">&quot;concurrently -n </span><span style="color:#79B8FF">\&quot;</span><span style="color:#9ECBFF">BACKEND,FRONTEND</span><span style="color:#79B8FF">\&quot;</span><span style="color:#9ECBFF"> -c </span><span style="color:#79B8FF">\&quot;</span><span style="color:#9ECBFF">green,yellow</span><span style="color:#79B8FF">\&quot;</span><span style="color:#79B8FF"> \&quot;</span><span style="color:#9ECBFF">npm run rails-server</span><span style="color:#79B8FF">\&quot;</span><span style="color:#79B8FF"> \&quot;</span><span style="color:#9ECBFF">./wait-for-rails.sh &amp;&amp; npm run vitest</span><span style="color:#79B8FF">\&quot;</span><span style="color:#9ECBFF">&quot;</span></span></code></pre>
<h2 id="alternatives-to-concurrently">Alternatives to Concurrently</h2>
<h3 id="two-terminal-panes">Two Terminal Panes</h3>
<p>You can obviously split panes in a terminal and run the frontend in one terminal and the backend in another. This is fine, but after awhile gets a little unwieldily.</p>
<h3 id="bash">Bash</h3>
<p>The easiest way to run two commands in one line in bash is with <code>&amp;&amp;</code>. But you can’t really use this to run a frontend and a backend at the same time. If you do <code>rails server &amp;&amp; cd ../frontend &amp;&amp; npm run dev</code> the frontend will only start after you stop the backend with <code>^ + c</code>. Same thing if you do <code>npm run dev &amp;&amp; cd ../backend &amp;&amp; rails server</code>.</p>
<p>One way around this in Bash is to background one of the servers. Although it has some drawbacks, this will work:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">npm</span><span style="color:#9ECBFF"> run</span><span style="color:#9ECBFF"> dev</span><span style="color:#E1E4E8"> &amp; </span><span style="color:#79B8FF">cd</span><span style="color:#9ECBFF"> ../backend</span><span style="color:#E1E4E8"> &amp;&amp; </span><span style="color:#B392F0">rails</span><span style="color:#9ECBFF"> server</span></span></code></pre>
<p>Although this generally shows the output of both the front and back, you don’t see the initial output of the backend. Also the output is pretty hard to read - nothing is prefixed with something like <code>[FRONTEND]</code> and nothing is color coded.</p>
<p>You actually can prefix output with something like <code>[FRONTEND]</code> in Bash, too:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">cd</span><span style="color:#9ECBFF"> ../frontend</span><span style="color:#E1E4E8"> &amp;&amp; </span><span style="color:#B392F0">npm</span><span style="color:#9ECBFF"> run</span><span style="color:#9ECBFF"> dev</span><span style="color:#F97583"> 2&gt;&amp;1</span><span style="color:#F97583"> |</span><span style="color:#B392F0"> sed</span><span style="color:#9ECBFF"> &#39;s/^/[FRONTEND] /&#39;</span><span style="color:#E1E4E8">) &amp; (</span><span style="color:#79B8FF">cd</span><span style="color:#9ECBFF"> ../backend</span><span style="color:#E1E4E8"> &amp;&amp; </span><span style="color:#B392F0">rails</span><span style="color:#9ECBFF"> s</span><span style="color:#F97583"> 2&gt;&amp;1</span><span style="color:#F97583"> |</span><span style="color:#B392F0"> sed</span><span style="color:#9ECBFF"> &#39;s/^/[BACKEND] /&#39;</span><span style="color:#E1E4E8">)</span></span></code></pre>
<p>This prefixes the output the way we want, but is not color coded.</p>
<p>This does the color coding and the prefixing:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">cd</span><span style="color:#9ECBFF"> ../frontend</span><span style="color:#E1E4E8"> &amp;&amp; </span><span style="color:#B392F0">npm</span><span style="color:#9ECBFF"> run</span><span style="color:#9ECBFF"> dev</span><span style="color:#F97583"> 2&gt;&amp;1</span><span style="color:#F97583"> |</span><span style="color:#B392F0"> sed</span><span style="color:#9ECBFF"> $&#39;s/^/\033[0;33m[FRONTEND]\033[0m /&#39;</span><span style="color:#E1E4E8">) &amp; (</span><span style="color:#79B8FF">cd</span><span style="color:#9ECBFF"> ../backend</span><span style="color:#E1E4E8"> &amp;&amp; </span><span style="color:#B392F0">rails</span><span style="color:#9ECBFF"> s</span><span style="color:#F97583"> 2&gt;&amp;1</span><span style="color:#F97583"> |</span><span style="color:#B392F0"> sed</span><span style="color:#9ECBFF"> $&#39;s/^/\033[0;32m[BACKEND]\033[0m /&#39;</span><span style="color:#E1E4E8">)</span></span></code></pre>
<p>One problem with these methods is they do not clear the ports correctly when you <code>^ + c</code> to stop the servers. One will be left running. We could add something to the beginning of that one-liner like <code>kill -9 $(lsof -t -i:3001)</code>, but at this point you’re probably seeing the upside of using Concurrently - it’s much simpler and cleaner. It correctly clears both ports when you <code>^ + c</code> and the command to run it is much simpler.</p> <!-- @ts-expect-error: Custom attributes for Utterances script --> <script src="https://utteranc.es/client.js" repo="mark-mcdermott/mark-mcdermott.github.io" issue-term="pathname" theme="github-light" crossorigin="anonymous" async></script> </div> </article> <footer class="mt-12" data-astro-cid-olvf4l2g> <a class="inline-block text-2xl font-black font-['Montserrat'] hover:scale-[1.02]" target="_self" href="/"><span data-astro-cid-i45duxs4>markmcdermott.io</span> </a> <p data-astro-cid-i45duxs4> <a href="https://github.com/mark-mcdermott" data-astro-cid-i45duxs4>github</a> |
<a href="https://bsky.app/profile/mark-mcdermott.bsky.social" data-astro-cid-i45duxs4>bluesky</a> |
<a href="https://www.linkedin.com/in/mark-mcdermott-6a174916/" data-astro-cid-i45duxs4>linkedin</a></p> <p data-astro-cid-i45duxs4>&copy; 2025 mark mcdermott </p>  </footer>  </body></html> 